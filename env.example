# Shopify Configuration
# Get these from your Shopify app settings
SHOPIFY_API_KEY=your_shopify_api_key_here
SHOPIFY_API_SECRET=your_shopify_api_secret_here
SHOPIFY_SCOPES=read_orders,write_orders
SHOPIFY_HOST=your-ngrok-url.ngrok-free.dev

# Delybell API Configuration (REQUIRED)
# Get these from your Delybell account
DELYBELL_API_URL=https://new.api.delybell.com
DELYBELL_ACCESS_KEY=your_delybell_access_key_here
DELYBELL_SECRET_KEY=your_delybell_secret_key_here

# Server Configuration
PORT=3000

# Default Order Processing Configuration
# These values are used for automatic webhook processing

# Service Type
DEFAULT_SERVICE_TYPE_ID=1

# Pickup Date & Slot (MANDATORY - Dispatch Trigger)
# ⚠️ CRITICAL: pickup_date and pickup_slot are MANDATORY
# These fields are the dispatch trigger - Delybell uses them to know when to dispatch orders
# Without these fields, orders will stay in "Open" state and won't be dispatched
#
# Cutoff Rule (automatically applied):
#   - Orders placed before 12:00 PM (Bahrain time) → Same-day pickup
#   - Orders placed after 12:00 PM (Bahrain time) → Next-day pickup
#
# pickup_date: Automatically calculated based on cutoff rule. Format: YYYY-MM-DD
# pickup_slot: Default slot type. Options: Morning = 1, Afternoon = 2, Evening = 3
DEFAULT_PICKUP_SLOT_TYPE=1

# Destination Location (where orders are delivered TO)
# ⚠️ IMPORTANT: These are ONLY for TESTING endpoints (/test/*)
# 
# For REAL orders (webhooks, API sync):
# - Destination addresses are parsed from Shopify shipping addresses
# - Orders are REJECTED if address cannot be mapped
# - These defaults are NOT used for production orders
#
# For TEST endpoints only:
DEFAULT_DESTINATION_BLOCK_ID=5
DEFAULT_DESTINATION_ROAD_ID=1447
DEFAULT_DESTINATION_BUILDING_ID=1
DEFAULT_DESTINATION_FLAT_NUMBER=N/A

# Pickup Location (Company - Hardcoded in code)
# ⚠️ CRITICAL: Pickup address is HARDCODED to company's registered Delybell address
# This is used for ALL Shopify stores - same pickup location for all orders
# Address: "Building 417, Road 114, Block 306, Ras Ruman"
# Mapping:
#   Block Number: 306 → Block ID: 1
#   Road Number: 114 → Road ID: 114
#   Building Number: 417 → Building ID: 417
#
# The following are only used for customer_name and mobile_number:
DEFAULT_PICKUP_CUSTOMER_NAME=Company
DEFAULT_PICKUP_MOBILE_NUMBER=+97300000000

# ⚠️ DEPRECATED: These are no longer used (pickup is hardcoded)
# Kept for backward compatibility but will be ignored
DEFAULT_PICKUP_ADDRESS=Building 417, Road 114, Block 306, Ras Ruman
DEFAULT_PICKUP_BLOCK_ID=1
DEFAULT_PICKUP_ROAD_ID=114
DEFAULT_PICKUP_BUILDING_ID=417

# Address Format Notes:
# ⚠️ CRITICAL: Delybell requires STRUCTURED ADDRESS FORMAT (separate fields)
# 
# Correct Format (Structured - REQUIRED):
#   Block No: <number> (REQUIRED)
#   Road No: <number> (REQUIRED)
#   Building No: <number> (Optional)
#   Flat/Office Number: <value or N/A> (Optional)
# 
# Incorrect Format (Single-line - NOT ACCEPTED):
#   "Building 456, Road 1234, Flat 12, Block 321, Manama, 903, Bahrain"
# 
# The destination_address field in API is OPTIONAL and for display only.
# The routing engine uses the separate block_id, road_id, building_id fields.
